<bci-toolbar>
  <bci-toolbar-item class="toggle-sidebar" value="toggle" title="Toggle sidebar" (click)="onToggleHideSidebar()">
    <mat-icon fontIcon="bosch-ic-grid-view" [ngClass]="isSidebarOpened ? 'toggle-sidebar-active' : ''"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-spacing></bci-toolbar-spacing>

  <bci-toolbar-item value="new" title="New/Load" [matMenuTriggerFor]="loadMenu" data-cy="tbLoadButton">
    <mat-icon fontIcon="Bosch-Ic-upload"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-item value="save" title="Save" [matMenuTriggerFor]="saveMenu">
    <mat-icon fontIcon="Bosch-Ic-save"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-item value="add-file" title="Add file to namespace" (click)="fileInput.click()">
    <mat-icon fontIcon="bosch-ic-document-add"></mat-icon>
  </bci-toolbar-item>

  <mat-menu #loadMenu="matMenu">
    <bci-toolbar-item (click)="onNew()" matTooltip="Create/Upload Aspect Model" mat-menu-item data-cy="create-model">
      <mat-icon fontIcon="bosch-ic-document"></mat-icon>
      <span>Create/Upload Aspect Model</span>
    </bci-toolbar-item>
    <bci-toolbar-item (click)="zipInput.click()" matTooltip="Import Package" mat-menu-item data-cy="import-package">
      <mat-icon fontIcon="bosch-ic-document-zip"></mat-icon>
      <span>Import Package</span>
    </bci-toolbar-item>
  </mat-menu>

  <mat-menu #saveMenu="matMenu">
    <bci-toolbar-item mat-menu-item (click)="onDownload()">
      <mat-icon fontIcon="bosch-ic-download"></mat-icon>
      <span>Export Aspect Model</span>
    </bci-toolbar-item>
    <bci-toolbar-item mat-menu-item (click)="openExportModal()">
      <mat-icon fontIcon="bosch-ic-download"></mat-icon>
      <span>Export Namespace</span>
    </bci-toolbar-item>
    <bci-toolbar-item mat-menu-item (click)="onSave()">
      <mat-icon fontIcon="Bosch-Ic-save"></mat-icon>
      <span>Save to Workspace</span>
    </bci-toolbar-item>
  </mat-menu>

  <bci-toolbar-spacing></bci-toolbar-spacing>

  <bci-toolbar-item value="editHighlightedCell" title="Edit highlighted cell" (click)="editSelectedCell.emit()">
    <mat-icon fontIcon="bosch-ic-edit"></mat-icon>
  </bci-toolbar-item>
  <bci-toolbar-item value="delete" title="Delete" data-cy="tbDeleteButton" (click)="onDelete()">
    <mat-icon fontIcon="Bosch-Ic-delete"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-item value="toggle-expand" title="{{ getLabelExpandCollapse() }}" (click)="onToggleExpand()">
    <mat-icon
      [class.editor-icon-active]="!isAllShapesExpanded"
      [fontIcon]="isAllShapesExpanded ? 'bosch-ic-arrows-collapse-object' : 'bosch-ic-arrows-expand-object'"
      data-cy="collapseExpandToggle"
    ></mat-icon>
  </bci-toolbar-item>
  <bci-toolbar-item value="format" title="Format" (click)="onFormat()">
    <mat-icon fontIcon="bosch-ic-hierarchy"></mat-icon>
  </bci-toolbar-item>
  <bci-toolbar-item value="connect" title="Connect" data-cy="tbConnectButton" (click)="onConnect()">
    <mat-icon fontIcon="Bosch-Ic-connected"></mat-icon>
  </bci-toolbar-item>
  <bci-toolbar-item value="validate" title="Validate" data-cy="tbValidateButton" (click)="onValidate()">
    <mat-icon fontIcon="bosch-ic-document-check"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-spacing></bci-toolbar-spacing>

  <bci-toolbar-item value="print" title="Print" data-cy="tbPrintButton" (click)="onPrint()">
    <mat-icon fontIcon="Bosch-Ic-print"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-spacing></bci-toolbar-spacing>

  <bci-toolbar-item value="editorMap" title="{{ getTitleEditorMap() }}" (click)="onToggleEditorMap()">
    <mat-icon [class.editor-icon-active]="settings.showEditorMap" fontIcon="bosch-ic-map"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-item value="editorNav" title="{{ getTitleEditorNavigation() }}" (click)="onToggleEditorNavigation()">
    <mat-icon [class.editor-icon-active]="settings.showEditorNav" fontIcon="bosch-ic-window-settings"></mat-icon>
  </bci-toolbar-item>

  <bci-toolbar-spacing></bci-toolbar-spacing>
  <bci-search-bar></bci-search-bar>
  <bci-toolbar-spacing></bci-toolbar-spacing>
</bci-toolbar>

<p class="changes" *ngIf="savedModel$ | async as savedModel">
  <span>{{ savedModel.changed ? 'There are currently unsaved changes' : 'Auto-save has captured all your changes' }}</span>
  <span *ngIf="savedModel.date">Last auto-save: {{ savedModel.date | date: 'dd/MM/yyyy HH:mm' }}</span>
</p>

<input style="display: none" type="file" (change)="onAddFileToNamespace($event)" #fileInput accept=".ttl" />
<input style="display: none" type="file" (change)="uploadZip($event)" #zipInput accept=".zip" />
