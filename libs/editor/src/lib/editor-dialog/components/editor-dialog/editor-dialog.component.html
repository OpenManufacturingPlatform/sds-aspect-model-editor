<!--
  ~  Copyright (c) 2020 Robert Bosch Manufacturing Solutions GmbH, Germany. All rights reserved.
  -->

<div *ngIf="isShown()">
  <div class="static-dialog-top">
    <div fxLayout="row" fxLayoutGap="15px" fxLayoutAlign="space-between center">
      <div fxFlex="90">
        <div class="title">
          {{ getTitle() }}
        </div>
        <p *ngIf="metaModelElement?.isExternalReference()" class="namespace-prefix">
          {{ metaModelElement?.aspectModelUrn?.split('#')[0] }}
        </p>
      </div>
      <div fxFlex="10" class="close-button-container">
        <button class="close-button" mat-icon-button tabindex="-1" (click)="onClose()">
          <em class="Bosch-Ic Bosch-Ic-abort"></em>
        </button>
      </div>
    </div>
    <hr />
  </div>

  <form [formGroup]="formGroup" *ngIf="isShown()" novalidate>
    <div class="scrollable-dialog-content">
      <div [ngSwitch]="true">
        <!-- the same view can be shown in more than one case -->
        <bci-bame-aspect *ngSwitchCase="isOfType(['DefaultAspect'])" [parentForm]="formGroup"></bci-bame-aspect>
        <bci-bame-characteristic
          *ngSwitchCase="isCharacteristic() && !isOfType(['DefaultTrait'])"
          [parentForm]="formGroup"
        ></bci-bame-characteristic>
        <bci-bame-constraint *ngSwitchCase="isConstraint()" [parentForm]="formGroup"></bci-bame-constraint>
        <bci-bame-property *ngSwitchCase="isOfType(['DefaultProperty'])" [parentForm]="formGroup"></bci-bame-property>
        <bci-bame-operation *ngSwitchCase="isOfType(['DefaultOperation'])" [parentForm]="formGroup"></bci-bame-operation>
        <bci-bame-entity *ngSwitchCase="isOfType(['DefaultEntity'])" [parentForm]="formGroup"></bci-bame-entity>
        <bci-bame-unit *ngSwitchCase="isOfType(['DefaultUnit'])" [parentForm]="formGroup"></bci-bame-unit>
        <bci-trait-characteristic *ngSwitchCase="isOfType(['DefaultTrait'])" [parentForm]="formGroup"></bci-trait-characteristic>
        <bci-bame-entity-value *ngSwitchCase="isOfType(['DefaultEntityValue'])" [parentForm]="formGroup"></bci-bame-entity-value>
        <bci-bame-event *ngSwitchCase="isOfType(['DefaultEvent'])" [parentForm]="formGroup"></bci-bame-event>
      </div>
      <div class="static-dialog-button">
        <hr />
        <div fxLayout="row" fxLayoutGap="15px" fxLayoutAlign="end" class="button-group">
          <button
            *ngIf="metaModelDialogService.isSaveButtonEnabled()"
            type="button"
            mat-button
            (click)="onClose()"
            data-cy="editorCancelButton"
          >
            Cancel
          </button>
          <button
            *ngIf="metaModelDialogService.isSaveButtonEnabled()"
            mat-raised-button
            type="button"
            [disabled]="!formGroup.valid"
            (click)="onSave()"
            data-cy="editorSaveButton"
          >
            Save
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
