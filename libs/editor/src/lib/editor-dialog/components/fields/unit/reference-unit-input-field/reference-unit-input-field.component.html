<div *ngIf="metaModelElement?.referenceUnit || !metaModelElement.isPredefined()" fxLayout="row" fxLayoutGap="15px" fxLayoutAlign="space-between center">
  <mat-form-field>
    <mat-label for="referenceUnit">ReferenceUnit</mat-label>
    <input #unit [matAutocomplete]="auto" matInput name="referenceUnit" [formControl]="unitDisplayControl" data-cy="referenceUnit" />
    <button
      *ngIf="unitDisplayControl?.disabled && !metaModelElement?.isExternalReference() && !metaModelElement.isPredefined()"
      (click)="unlockUnit()"
      class="close-button"
      data-cy="clear-unit-button"
      matSuffix
      mat-icon-button
      tabindex="-1"
    >
      <em class="Bosch-Ic Bosch-Ic-abort"></em>
    </button>

    <mat-autocomplete #auto="matAutocomplete">
      <ng-container #predefinedUnits *ngIf="filteredPredefinedUnits$ | async as filteredPredefinedUnits">
        <mat-optgroup label="Predefined Units" *ngIf="filteredPredefinedUnits?.length">
          <mat-option
            *ngFor="let unit of filteredPredefinedUnits$ | async"
            [value]="unit.name"
            (onSelectionChange)="onPredefinedUnitChange(unit)">
            {{ unit.name }}
          </mat-option>
        </mat-optgroup>
      </ng-container>
    </mat-autocomplete>
    <mat-hint>unit:referenceUnit</mat-hint>
  </mat-form-field>
</div>
